<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Crud Node.js and Mysql</title>
  <link href="/assets/css/bootstrap.css" rel="stylesheet" type="text/css"/>
</head>
<body>
  <div class="container">
    <h2>Customers List</h2>
      <button class="btn btn-success" data-toggle="modal" data-target="#MyModalAdd">Add New</button>
    <table class="table table-striped" id="mytable">
      <thead>
         <tr>
           <th>Customer ID</th>
           <th>Customer Name</th>
           <th>Cutomer Address</th>
         </tr>
      </thead>
      <tbody>
        {{#each results}}
        <tr>
          <td>{{ customers_id }}</td>
          <td>{{ customers_name }}</td>
          <td>{{ customers_address }}</td>
          <td>
	    <a href="javascript:void(0);" class="btn btn-sm btn-info edit" data-id="{{ customers_id }}" data-customers_name="{{ customers_name }}" data-customers_address="{{ customers_address }}">Edit</a>
            <a href="javascript:void(0);" class="btn btn-sm btn-danger delete" data-id="{{ customers_id }}">Delete</a>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

    <!-- Modal ADD Customers-->
    <form action="/save" method="post">
      <div class="modal fade" id="myModalAdd" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLable">Add new customers</h5>
              <button type-"button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <input type="text" name="customers_name" class="form-control" placeholder="Customer Name" required>
              </div>
              
              <div class="form-group">
                <input type="text" name="customers_address" class="form-control" placeholder="Address" required>
              </div>
            </div>
            <div class="modal-footer">
               <input type="hidden" name="id" class="customers_id">
               <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
               <button type="submit" class"btn btn-primary">Save</button>
            <div>
          </div>
        </div>  
      </div>
    </form>   
   
    <!--Modal Update Customers-->
    <form action="/update" method="post">
      <div class="modal fade" id="EditModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLable">Add new customers</h5>
		<button type-"button" class="close" data-dismiss="modal" aria-label="Close">
                 <span aria-hidden="true">&times;</span>
                </button>
            </div>
	    <div class="modal-body">
	      <div class="form-group">
                <input type="text" name="customers_name" class="form-control customers_name" placeholder="Customer Name" required>
              </div>
              <div class="form-group">
                <input type="text" name="customers_address" class="form-control address" placeholder="Address" required>
              </div>
            </div>
            <div class="modal-footer">
	      <input type="hidden" name="id" class="customers_id">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class"btn btn-primary">Update</button>
            </div>
          </div>
        </div>
      </div>
    </form>

    <!-- Modal Delete Customers-->
    <form id="add-row-form" action="/delete" method="post">
      <div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="myModalLabel">Delete Customer</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
 	      <strong>Are you sure to delete this data</strong>
            </div>
 	    <div class="modal-footer">
 	      <input type="hidden" name="customers_name" class="form-control customers_id2" required>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-success">Delete</button> 
          </div>
          
        </div>
      </div>
    </form>
</body>

<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/bootstrap.js"></script>
<script>
  $(document).ready(function() {
    $('mytable').on('click','edit', function() {
      var customers_id = $(this).data('id');
      var customers_name = $(this).data('customers_name');
      var customers_address = $(this).data('customers_address');
      $('#EditModal').modal('show');
      $('.customers_name').val('customers_name');
      $('.address').val('customers_address');
      $('.customers_id').val('customers_id');
    });
    $('#mytable').on('click', 'delete', function() {
      var customers_id = $(this).data('id');
      $('#DeleteModal').modal('show');
      $('.customers_id2').val(customers_id);
    });  
});
</script>
</html>
